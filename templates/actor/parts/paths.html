<section class="paths-section">
    <!-- Character Progression Section -->
    <div class="character-progression">
        <h3>Character Progression</h3>

        <!-- Core Stats -->
        <div class="progression-core">
            <div class="core-stats">
                <div class="form-group">
                    <label>Level</label>
                    <input type="number" name="system.level" value="{{system.level}}" data-dtype="Number" class="level-input" />
                </div>
                <div class="form-group">
                    <label>Experience</label>
                    <input type="number" name="system.experience" value="{{system.experience}}" data-dtype="Number" />
                </div>
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" name="system.isMonster" {{#if system.isMonster}} checked{{/if}} />
                        Monster
                    </label>
                </div>
            </div>
        </div>

        <!-- Path Progression -->
        <div class="progression-paths">
            <h4>Path Progression</h4>
            <div class="path-stats">
                <div class="form-group">
                    <label>Paths Allowed</label>
                    <input type="number" name="system.pathsAllowed" value="{{system.pathsAllowed}}" data-dtype="Number" readonly />
                </div>
                <div class="form-group">
                    <label>Max Tier</label>
                    <input type="number" name="system.maxTier" value="{{system.maxTier}}" data-dtype="Number" readonly />
                </div>
            </div>
        </div>

        <!-- Tier Levels (Collapsible) -->
        <div class="progression-tiers">
            <h4 class="progression-stats" data-target="tier-levels-content">
                Tier Effective Levels
            </h4>
            <div class="collapsible-content" id="tier-levels-content">
                <div class="tier-grid">
                    <div class="tier-stat">
                        <label>Tier 1 TL</label>
                        <input type="number" name="system.tier1tl" value="{{system.tier1tl}}" data-dtype="Number" readonly />
                    </div>
                    <div class="tier-stat">
                        <label>Tier 2 TL</label>
                        <input type="number" name="system.tier2tl" value="{{system.tier2tl}}" data-dtype="Number" readonly />
                    </div>
                    <div class="tier-stat">
                        <label>Tier 3 TL</label>
                        <input type="number" name="system.tier3tl" value="{{system.tier3tl}}" data-dtype="Number" readonly />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Paths -->
    <div class="paths">
        <h2>
            Paths
            <a class="item-create" title="Add Path" data-type="path"><i class="fas fa-plus"></i></a>
            <a class="path-browse" title="Browse Paths"><i class="fas fa-search"></i></a>
        </h2>

        <div class="paths-list">
            {{#each actor.paths as |path id|}}
            <div class="path-item" data-item-id="{{path._id}}">
                <input type="checkbox" id="toggle-path-{{path._id}}" class="path-checkbox">
                <div class="path-header">
                    <label for="toggle-path-{{path._id}}" class="path-name-container">
                        <div class="path-name">{{path.name}} <span class="path-tier">(Tier {{path.system.tier}})</span></div>
                        <i class="fas fa-chevron-down path-toggle-icon"></i>
                    </label>
                    <div class="path-controls">
                        <a class="item-edit" title="Edit Path"><i class="fas fa-edit"></i></a>
                        <a class="item-delete" title="Delete Path"><i class="fas fa-trash"></i></a>
                    </div>
                </div>
                <div class="path-description">
                    <p><strong>Base HP:</strong> {{path.system.baseHP}}</p>
                    {{#if path.system.description}}
                    <p>{{path.system.description}}</p>
                    {{/if}}
                    {{#if path.system.abilities}}
                    <div class="path-abilities">
                        <p><strong>Path Abilities:</strong></p>
                        {{#each path.system.abilities as |ability|}}
                        <div class="path-ability">
                            <strong>{{ability.name}}:</strong> {{ability.description}}
                        </div>
                        {{/each}}
                    </div>
                    {{/if}}
                </div>
            </div>
            {{/each}}
        </div>
    </div>

    <!-- Talents -->
    <div class="talents">
        <h2>
            Talents
            <a class="item-create" title="Add Talent" data-type="talent"><i class="fas fa-plus"></i></a>
            <a class="talent-browse" title="Browse Talents"><i class="fas fa-search"></i></a>
        </h2>

        <div class="talents-list">
            {{#each actor.talents as |talent id|}}
            <div class="talent-item" data-item-id="{{talent._id}}">
                <input type="checkbox" id="toggle-talent-{{talent._id}}" class="talent-checkbox">
                <div class="talent-header">
                    <label for="toggle-talent-{{talent._id}}" class="talent-name-container">
                        <div class="talent-name">{{talent.name}}</div>
                        <i class="fas fa-chevron-down talent-toggle-icon"></i>
                    </label>
                    <div class="talent-controls">
                        <a class="item-edit" title="Edit Talent"><i class="fas fa-edit"></i></a>
                        <a class="item-delete" title="Delete Talent"><i class="fas fa-trash"></i></a>
                    </div>
                </div>
                <div class="talent-description">
                    <p>{{talent.system.description}}</p>
                    {{#if talent.system.usesPerDay}}
                    <p><strong>Uses per Day:</strong> {{talent.system.usesPerDay}}</p>
                    {{/if}}
                    {{#if talent.system.prerequisites}}
                    <p><strong>Prerequisites:</strong> {{talent.system.prerequisites}}</p>
                    {{/if}}
                </div>
            </div>
            {{/each}}
        </div>
    </div>

    <!-- Talents Counter -->
    <div class="talents-counter">
        <h3>Talent Count</h3>
        <div class="talent-numbers">
            <div class="form-group">
                <label>From Level</label>
                <input type="number" name="system.talentsFromLevel" value="{{system.talentsFromLevel}}" data-dtype="Number" readonly />
            </div>
            <div class="form-group">
                <label>Bonus</label>
                <input type="number" name="system.talentsBonus" value="{{system.talentsBonus}}" data-dtype="Number" />
            </div>
            <div class="form-group">
                <label>Total</label>
                <input type="number" name="system.talentsTotal" value="{{system.talentsTotal}}" data-dtype="Number" readonly />
            </div>
        </div>
    </div>

    <!-- Precepts -->
    <div class="precepts">
        <h2>
            Precepts
            <a class="item-create" title="Add Precept" data-type="precept"><i class="fas fa-plus"></i></a>
            <a class="precept-browse" title="Browse Precepts"><i class="fas fa-search"></i></a>
        </h2>

        <div class="precepts-list">
            {{#each actor.precepts as |precept id|}}
            <div class="precept-item" data-item-id="{{precept._id}}">
                <input type="checkbox" id="toggle-precept-{{precept._id}}" class="precept-checkbox">
                <div class="precept-header">
                    <label for="toggle-precept-{{precept._id}}" class="precept-name-container">
                        <div class="precept-name">{{precept.name}}</div>
                        <i class="fas fa-chevron-down precept-toggle-icon"></i>
                    </label>
                    <div class="precept-controls">
                        <a class="item-edit" title="Edit Precept"><i class="fas fa-edit"></i></a>
                        <a class="item-delete" title="Delete Precept"><i class="fas fa-trash"></i></a>
                    </div>
                </div>
                <div class="precept-description">
                    <p>{{precept.system.description}}</p>
                    {{#if precept.system.deity}}
                    <p><strong>Deity:</strong> {{precept.system.deity}}</p>
                    {{/if}}
                    {{#if precept.system.domain}}
                    <p><strong>Domain:</strong> {{precept.system.domain}}</p>
                    {{/if}}
                    {{#if precept.system.commandment}}
                    <p><strong>Commandment:</strong> {{precept.system.commandment}}</p>
                    {{/if}}
                </div>
            </div>
            {{/each}}
        </div>
    </div>


    <!-- Traits -->
    <div class="traits">
        <h2>
            Traits
            <a class="item-create" title="Add Trait" data-type="trait"><i class="fas fa-plus"></i></a>
            <a class="trait-browse" title="Browse Traits"><i class="fas fa-search"></i></a>
        </h2>

        <div class="traits-list">
            {{#each actor.traits as |trait id|}}
            <div class="trait-item" data-item-id="{{trait._id}}">
                <input type="checkbox" id="toggle-trait-{{trait._id}}" class="trait-checkbox">
                <div class="trait-header">
                    <label for="toggle-trait-{{trait._id}}" class="trait-name-container">
                        <div class="trait-name">{{trait.name}}</div>
                        <i class="fas fa-chevron-down trait-toggle-icon"></i>
                    </label>
                    <div class="trait-controls">
                        <a class="item-edit" title="Edit Trait"><i class="fas fa-edit"></i></a>
                        <a class="item-delete" title="Delete Trait"><i class="fas fa-trash"></i></a>
                    </div>
                </div>
                <div class="trait-description">
                    <p>{{trait.system.description}}</p>
                    {{#if trait.system.prerequisites}}
                    <p><strong>Prerequisites:</strong> {{trait.system.prerequisites}}</p>
                    {{/if}}
                    {{#if trait.system.source}}
                    <p><strong>Source:</strong> {{trait.system.source}}</p>
                    {{/if}}
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</section>